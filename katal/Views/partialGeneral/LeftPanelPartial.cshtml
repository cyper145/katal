@using katal.conexion.model.neg
@using katal.conexion.model.entity

<h3 class="section-caption contents-caption"> Menú</h3>

@Html.DevExpress().NavBar(
       settings =>
       {
           var rol2 = HttpContext.Current.Session["Rol"];
           int rol = HttpContext.Current.Session["Rol"] == null ? -1 : (int)HttpContext.Current.Session["Rol"];
           int user_id = HttpContext.Current.Session["user_id"] == null ? 0 : (int)HttpContext.Current.Session["Rol"];
           // int rol = HttpContext.Current.Session["Rol"] == null ? 1 : (int)HttpContext.Current.Session["Rol"];
           settings.Name = "nbFeatures";
           settings.AllowExpanding = true;
           settings.AllowSelectItem = true;
           settings.AutoCollapse = false;
           settings.EnableHotTrack = true;
           settings.EnableAnimation = true;
           settings.SaveStateToCookies = false;
           settings.Width = Unit.Parse("100%");
           // solucion rapida
           RoleNeg roleNeg = new RoleNeg();
           List<ModuloAsignacion> modulos=roleNeg.lista(rol);
           settings.Groups.Add(group =>
           {
               group.Expanded = false;
               //guardar la seccion los modulos y programas
               group.Visible = roleNeg.moduloAsigned(modulos, "seguridad") == true ? true : false;
               group.Text = "Seguridad";
               group.HeaderStyle.Font.Size = FontUnit.Larger;
               group.HeaderStyle.HoverStyle.BackColor = System.Drawing.Color.FromArgb(230, 230, 230);
               if (roleNeg.moduloAsigned(modulos, "usuario"))
               {
                   group.Items.Add("Usuarios", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/GridView");
               }
               if (roleNeg.moduloAsigned(modulos, "roles"))
               {
                   group.Items.Add("Roles", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/role");
               }
               if (roleNeg.moduloAsigned(modulos, "asignar-rol"))
               {
                   group.Items.Add("Asignar roles", "ratas", "~/Content/NavBar/BO_Scheduler.png", "userview");
               }
               if (roleNeg.moduloAsigned(modulos, "asignar"))
               {
                   group.Items.Add("Asignar", "ratas", "~/Content/NavBar/BO_Scheduler.png", "userview");
               }

           });
           settings.Groups.Add(group =>
           {
               group.Visible = roleNeg.moduloAsigned(modulos, "compras") == true ? true : false;
               group.Text = "Compras";
               group.Expanded = false;
               group.HeaderStyle.Font.Size = FontUnit.Larger;
               group.HeaderStyle.HoverStyle.BackColor = System.Drawing.Color.FromArgb(230, 230, 230);
               if (roleNeg.moduloAsigned(modulos, "articulos"))
               {
                   group.Items.Add("Articulos", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/Article");
               }
               if (roleNeg.moduloAsigned(modulos, "proveedores"))
               {
                   group.Items.Add("Proveedores", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/Proveedor");
               }
               if (roleNeg.moduloAsigned(modulos, "areas"))
               {
                   group.Items.Add("Areas", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/Areas");
               }
               if (roleNeg.moduloAsigned(modulos, "orden-compra"))
               {
                   group.Items.Add("Orden Compra", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/OrdenCompra");
               }
               if (roleNeg.moduloAsigned(modulos, "requisicion-compra"))
               {
                   group.Items.Add("Requisicion compra", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/RequisionCompra");
               }
               if (roleNeg.moduloAsigned(modulos, "registros-documentos"))
               {
                   group.Items.Add("Registros Documentos", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/Comprobante");
               }
               if (roleNeg.moduloAsigned(modulos, "provision-contabilidad"))
               {
                   group.Items.Add("Provisión a Contabilidad", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/ProvisionContabilidad");
               }
               if (roleNeg.moduloAsigned(modulos, "modificacion-comprobates"))
               {

                   group.Items.Add("Modificacion de Comprobantes", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/ModificarComprobante");
               }
               if (roleNeg.moduloAsigned(modulos, "generar-Detracc"))
               {
                   group.Items.Add("generar PagoMasivo Detracc.", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/GenerarDetraccion");
               }
               if (roleNeg.moduloAsigned(modulos, "responsable-compra"))
               {
                   group.Items.Add("Responsable Compra", "ratas", "~/Content/NavBar/BO_Scheduler.png", "/ResponsableCompra");
               }
           });
           settings.Groups.Add(group =>
           {
               group.Expanded = false;
               group.Visible = roleNeg.moduloAsigned(modulos, "caja_banco") == true ? true : false;
               group.Text = "Caja Banco";
               group.HeaderStyle.Font.Size = FontUnit.Larger;
               group.HeaderStyle.HoverStyle.BackColor = System.Drawing.Color.FromArgb(230,230, 230);

               //group.HeaderStyle.w = true;

               group.HeaderImage.Url = "~/Content/Images/caja-banco.svg";

               group.HeaderImage.Height = Unit.Pixel(20);

               if (roleNeg.moduloAsigned(modulos, "cotizaciones"))
               {
                   var dar=  group.Items.Add("Moviemientos", "ratas", "~/Content/Images/dinero.svg", "MovimientoBanco");
                   dar.Image.Height= Unit.Pixel(25);
                  
               }
           });
       }).GetHtml()


