@using katal.Model;
@functions{
    protected void PrepareDateEditSettings(MVCxFormLayoutItem item)
    {
        item.NestedExtension().DateEdit(date =>
        {
            date.ShowModelErrors = true;
            date.Properties.ClientSideEvents.DateChanged = "UpdateInfo";
            date.Properties.ValidationSettings.Display = Display.Dynamic;
            date.Properties.ValidationSettings.SetFocusOnError = true;
            date.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.ImageWithTooltip;
            date.Properties.ValidationSettings.CausesValidation = true;
            date.Properties.CalendarProperties.Columns = 2;
            date.Properties.CalendarProperties.FastNavProperties.DisplayMode = FastNavigationDisplayMode.Inline;
        });
    }
}



@section AdditionalResources {
<script src="@Url.Content(" ~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content(" ~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<style type="text/css">
    .pickerGroupContainer,
    .pickerFormLayout > .dxflGroupSys {
        padding-left: 0 !important;
    }
</style>
}

@{
    Html.EnableClientValidation();
    Html.EnableUnobtrusiveJavaScript();
}

<script type="text/javascript">
    function UpdateInfo() {
        var daysTotal = End.GetRangeDayCount();
        Info.SetText(daysTotal !== -1 ? daysTotal + ' days' : '');
    }
    $(document).ready(function () {
        if (Boolean('@(ViewBag.SuccessValidation)'))
            alert('The form has been submitted successfully.');
    });
    function UpdateInfodey() {
        console.log(Start);
        console.log(End);
    }
</script>

@using (Html.BeginForm("parametros", "MovimientoBanco", FormMethod.Post))
{
    @Html.DevExpress().FormLayout(settings =>
{
    settings.Name = "Picker2";
    settings.RequiredMarkDisplayMode = RequiredMarkMode.None;
    settings.SettingsItemCaptions.Location = LayoutItemCaptionLocation.Left;
    settings.ControlStyle.CssClass = "pickerFormLayout";
    settings.UseDefaultPaddings = true;
    settings.SettingsAdaptivity.AdaptivityMode = FormLayoutAdaptivityMode.SingleColumnWindowLimit;
    settings.SettingsAdaptivity.SwitchToSingleColumnAtWindowInnerWidth = 600;
    settings.Width = Unit.Percentage(60);
    var pickerGroup = settings.Items.AddGroupItem(i =>
    {
        i.Caption = "Parametros";
        i.ColCount = 3;
        i.UseDefaultPaddings = false;
        i.GroupBoxDecoration = GroupBoxDecoration.HeadingLine;
    });
    pickerGroup.ParentContainerStyle.CssClass = "pickerGroupContainer";

    pickerGroup.Items.Add(i =>
    {

        i.ColumnSpan =1;
        i.Caption = "Caja Banco";
        //i.CaptionSettings.Location = LayoutItemCaptionLocation.Top;
        i.SetNestedContent(() =>
        {
            Html.RenderAction("MultiSelectBancos", new { CB_C_CODIG= GridViewHelper.codigobanco});

        });
    });
    pickerGroup.Items.Add(i =>
    {
        i.Caption = "Fecha de Proceso";
        i.ColumnSpan = 1;
        i.NestedExtension().DateEdit(tb =>
        {
            tb.Name = "Proceso";
            tb.Date=DateTime.Now;
            tb.Width = Unit.Percentage(100);
            tb.Enabled = false;
        });
    });
    pickerGroup.Items.Add(i =>
    {
        i.ColumnSpan = 1;
        i.NestedExtension().Button(btn =>
        {
            btn.Name = "Submit2";
            btn.UseSubmitBehavior = true;
            btn.Text = "Aceptar";
        });
        i.ShowCaption = DefaultBoolean.False;
        i.VerticalAlign = FormLayoutVerticalAlign.Bottom;
        i.Width = Unit.Percentage(30);
    });
    pickerGroup.Items.Add(i =>
    {
        i.NestedExtensionType = FormLayoutNestedExtensionItemType.ValidationSummary;
        i.ShowCaption = DefaultBoolean.False;
        i.Width = Unit.Percentage(10);

    });
}).Bind(GridViewHelper.dateRange).GetHtml()
}
